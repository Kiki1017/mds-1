<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2020-06-14" />

<title>Standardizing Medical Devices Surveillance Data</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Standardizing Medical Devices Surveillance Data</h1>
<h4 class="date">2020-06-14</h4>



<p><strong>Why?</strong></p>
<p>Medical device event data are messy.</p>
<p>Common challenges include:</p>
<ul>
<li>Performing ongoing surveillance on messy data</li>
<li>Quickly answering simple questions such as:
<ul>
<li>Are events trending up?</li>
<li>How did my trends look 1 year ago? 2 years ago?</li>
</ul></li>
<li>Incompatibility of various sources of device-events</li>
<li>Difficulty integrating exposures, a.k.a. denominator data</li>
<li>Understanding all the possible combinations to analyze</li>
<li>Application of disproportionality analysis (DPA)</li>
<li>Documentation of analyses in a auditable, reproducible way</li>
</ul>
<p><strong>How?</strong></p>
<p>The <code>mds</code> package provides a standardized framework to address these challenges:</p>
<ul>
<li>Standardize events involving medical devices</li>
<li>Standardize exposures of the device (also known as opportunities for an event to occur, or event denominator)</li>
<li>Enumerate possible analyses in a flexible way</li>
<li>Generate times series of analyses for trending over time</li>
<li>Set up analyses for easy application of disproportionality analysis (DPA)</li>
<li>Save all files in lightweight <code>R</code> files for auditability, documentation, and reproducibility</li>
</ul>
<p><strong>Purpose of This Vignette</strong></p>
<ul>
<li>Introduce the basics on using <code>mds</code></li>
<li><a href="#foursteps">4 steps</a> to go from raw device-event and exposure data to <a href="#quickplot">plotting</a> event counts and rates over time</li>
<li>How to use the core <code>mds</code> functions: <a href="#de">deviceevent()</a>, <a href="#ex">exposure()</a>, <a href="#da">define_analyses()</a>, <a href="#ts">time_series()</a></li>
<li>Explain advanced usage options</li>
</ul>
<p><strong>Note on Statistical Algorithms</strong></p>
<p><code>mds</code> data and analysis standards allow for seamless application of various statistical trending algorithms via the <code>mdsstat</code> package (under development).</p>
<div id="data-maude-and-simulated-sales" class="section level2">
<h2>Data: MAUDE and Simulated Sales</h2>
<p>Our example dataset <code>maude</code> was queried from the <a href="https://open.fda.gov">FDA MAUDE API</a> and contains 535 reported events on bone cement in 2017. Furthermore, a simulated exposure dataset <code>sales</code> was generated to provide denominator data for our bone cement events.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(mds)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">dim</span>(maude)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#&gt; [1] 535  15</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">dim</span>(sales)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt; [1] 360   4</span></span></code></pre></div>
<pre><code>head(maude, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">report_number</th>
<th align="left">event_type</th>
<th align="left">date_received</th>
<th align="left">product_problem_flag</th>
<th align="left">adverse_event_flag</th>
<th align="left">report_source_code</th>
<th align="left">lot_number</th>
<th align="left">model_number</th>
<th align="left">manufacturer_d_name</th>
<th align="left">manufacturer_d_country</th>
<th align="left">brand_name</th>
<th align="left">device_name</th>
<th align="left">medical_specialty_description</th>
<th align="left">device_class</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0002249697-2017-00023</td>
<td align="left">Malfunction</td>
<td align="left">20170103</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX076</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
<td align="left">Bone Cement</td>
<td align="left">Orthopedic</td>
<td align="left">2</td>
<td align="left">Central</td>
</tr>
<tr class="even">
<td align="left">0002249697-2017-00028</td>
<td align="left">Malfunction</td>
<td align="left">20170103</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX080</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
<td align="left">Bone Cement</td>
<td align="left">Orthopedic</td>
<td align="left">2</td>
<td align="left">West</td>
</tr>
<tr class="odd">
<td align="left">0002249697-2017-00025</td>
<td align="left">Malfunction</td>
<td align="left">20170103</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX076</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
<td align="left">Bone Cement</td>
<td align="left">Orthopedic</td>
<td align="left">2</td>
<td align="left">Central</td>
</tr>
</tbody>
</table>
<pre><code>head(sales, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">device_name</th>
<th align="left">region</th>
<th align="left">sales_month</th>
<th align="right">sales_volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Arthroscope</td>
<td align="left">Central</td>
<td align="left">2017-01-01</td>
<td align="right">83</td>
</tr>
<tr class="even">
<td align="left">Arthroscope</td>
<td align="left">Central</td>
<td align="left">2017-02-01</td>
<td align="right">119</td>
</tr>
<tr class="odd">
<td align="left">Arthroscope</td>
<td align="left">Central</td>
<td align="left">2017-03-01</td>
<td align="right">112</td>
</tr>
</tbody>
</table>
</div>
<div id="foursteps" class="section level2">
<h2>Raw Data to Trending in 4 Steps</h2>
<p>The general workflow to go from data to trending over time is as follows:</p>
<ol style="list-style-type: decimal">
<li>Use <code>deviceevent()</code> to standardize device-event data.</li>
<li>Use <code>exposure()</code> to standardize exposure data (optional).</li>
<li>Use <code>define_analyses()</code> to enumerate possible analysis combinations.</li>
<li>Use <code>time_series()</code> to generate counts (and/or rates) by time based on your defined analyses.</li>
</ol>
<div id="live-example" class="section level3">
<h3>Live Example</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Step 1 - Device Events</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>de &lt;-<span class="st"> </span><span class="kw">deviceevent</span>(</span>
<span id="cb4-3"><a href="#cb4-3"></a>  maude,</span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="dt">time=</span><span class="st">&quot;date_received&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="dt">device_hierarchy=</span><span class="kw">c</span>(<span class="st">&quot;device_name&quot;</span>, <span class="st">&quot;device_class&quot;</span>),</span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="dt">event_hierarchy=</span><span class="kw">c</span>(<span class="st">&quot;event_type&quot;</span>, <span class="st">&quot;medical_specialty_description&quot;</span>),</span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="dt">key=</span><span class="st">&quot;report_number&quot;</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="dt">covariates=</span><span class="st">&quot;region&quot;</span>,</span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="dt">descriptors=</span><span class="st">&quot;_all_&quot;</span>)</span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co"># Step 2 - Exposures (Optional step)</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>ex &lt;-<span class="st"> </span><span class="kw">exposure</span>(</span>
<span id="cb4-13"><a href="#cb4-13"></a>  sales,</span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="dt">time=</span><span class="st">&quot;sales_month&quot;</span>,</span>
<span id="cb4-15"><a href="#cb4-15"></a>  <span class="dt">device_hierarchy=</span><span class="st">&quot;device_name&quot;</span>,</span>
<span id="cb4-16"><a href="#cb4-16"></a>  <span class="dt">match_levels=</span><span class="st">&quot;region&quot;</span>,</span>
<span id="cb4-17"><a href="#cb4-17"></a>  <span class="dt">count=</span><span class="st">&quot;sales_volume&quot;</span>)</span>
<span id="cb4-18"><a href="#cb4-18"></a></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co"># Step 3 - Define Analyses</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>da &lt;-<span class="st"> </span><span class="kw">define_analyses</span>(</span>
<span id="cb4-21"><a href="#cb4-21"></a>  de,</span>
<span id="cb4-22"><a href="#cb4-22"></a>  <span class="dt">device_level=</span><span class="st">&quot;device_name&quot;</span>,</span>
<span id="cb4-23"><a href="#cb4-23"></a>  <span class="dt">exposure=</span>ex,</span>
<span id="cb4-24"><a href="#cb4-24"></a>  <span class="dt">covariates=</span><span class="st">&quot;region&quot;</span>)</span>
<span id="cb4-25"><a href="#cb4-25"></a></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co"># Step 4 - Time Series</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>ts &lt;-<span class="st"> </span><span class="kw">time_series</span>(</span>
<span id="cb4-28"><a href="#cb4-28"></a>  da,</span>
<span id="cb4-29"><a href="#cb4-29"></a>  <span class="dt">deviceevents=</span>de,</span>
<span id="cb4-30"><a href="#cb4-30"></a>  <span class="dt">exposure=</span>ex)</span></code></pre></div>
</div>
</div>
<div id="what-to-do-next" class="section level2">
<h2>What to Do Next</h2>
<p>You may:</p>
<ul>
<li>Save your data (<code>de</code>, <code>ex</code>), analyses (<code>da</code>), and time series (<code>ts</code>) for documentation</li>
<li>Summarize your analyses using <code>summary()</code> and <code>define_analyses_dataframe()</code></li>
<li><code>plot()</code> your time series (<a href="#po">plotting options</a>)</li>
<li>Run trending statistics (and/or use the <code>mdsstat</code> package)</li>
</ul>
<div id="summarize-defined-analyses" class="section level3">
<h3>Summarize Defined Analyses</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">summary</span>(da)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt; $`Analyses Timestamp`</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; [1] &quot;2020-06-14 21:45:56 EDT&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; $`Analyses Counts`</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;         Total Analyses Analyses with Exposure          Device Levels </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;                     27                     27                      6 </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;           Event Levels             Covariates </span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;                      1                      2 </span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt; </span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt; $`Date Ranges`</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;           Data      Start        End</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; 1 Device-Event 2017-01-01 2017-12-01</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt; 2     Exposure 2017-01-01 2017-12-01</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt; 3         Both 2017-01-01 2017-12-01</span></span></code></pre></div>
</div>
<div id="show-all-analyses-as-a-data-frame" class="section level3">
<h3>Show All Analyses as a Data Frame</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>dadf &lt;-<span class="st"> </span><span class="kw">define_analyses_dataframe</span>(da)</span></code></pre></div>
<pre><code>head(dadf, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">device_level_source</th>
<th align="left">device_level</th>
<th align="left">device_1up_source</th>
<th align="left">device_1up</th>
<th align="left">event_level_source</th>
<th align="left">event_level</th>
<th align="left">covariate</th>
<th align="left">covariate_level</th>
<th align="left">invivo</th>
<th align="left">date_range_de_start</th>
<th align="left">date_range_de_end</th>
<th align="left">exp_device_level</th>
<th align="left">exp_covariate_level</th>
<th align="left">date_range_exposure_start</th>
<th align="left">date_range_exposure_end</th>
<th align="left">date_range_de_exp_start</th>
<th align="left">date_range_de_exp_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">Central</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">Central</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">West</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">West</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">East</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">East</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
</tbody>
</table>
</div>
<div id="quickplot" class="section level3">
<h3>Plot Time Series of Counts and Rates</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">plot</span>(ts[[<span class="dv">1</span>]])</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">plot</span>(ts[[<span class="dv">4</span>]], <span class="st">&quot;rate&quot;</span>, <span class="dt">type=</span><span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><img src="data:image/png;base64,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" /></p>
</div>
</div>
<div id="de" class="section level2">
<h2><code>deviceevent()</code> to Standardize Device-Event Data</h2>
<p><strong>Basic Usage</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>de &lt;-<span class="st"> </span><span class="kw">deviceevent</span>(maude, <span class="st">&quot;date_received&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;device_name&quot;</span>, <span class="st">&quot;device_class&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;event_type&quot;</span>, <span class="st">&quot;medical_specialty_description&quot;</span>))</span></code></pre></div>
<pre><code>head(de, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">key</th>
<th align="left">time</th>
<th align="left">device_1</th>
<th align="left">device_2</th>
<th align="left">event_1</th>
<th align="left">event_2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
</tr>
</tbody>
</table>
<p><strong>Advanced Usage</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>de &lt;-<span class="st"> </span><span class="kw">deviceevent</span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>  maude,</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">time=</span><span class="st">&quot;date_received&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">device_hierarchy=</span><span class="kw">c</span>(<span class="st">&quot;device_name&quot;</span>, <span class="st">&quot;device_class&quot;</span>),</span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="dt">event_hierarchy=</span><span class="kw">c</span>(<span class="st">&quot;event_type&quot;</span>, <span class="st">&quot;medical_specialty_description&quot;</span>),</span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="dt">key=</span><span class="st">&quot;report_number&quot;</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="dt">covariates=</span><span class="st">&quot;region&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="dt">descriptors=</span><span class="st">&quot;_all_&quot;</span>)</span></code></pre></div>
<pre><code>head(de, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">key</th>
<th align="left">time</th>
<th align="left">device_1</th>
<th align="left">device_2</th>
<th align="left">event_1</th>
<th align="left">event_2</th>
<th align="left">region</th>
<th align="left">product_problem_flag</th>
<th align="left">adverse_event_flag</th>
<th align="left">report_source_code</th>
<th align="left">lot_number</th>
<th align="left">model_number</th>
<th align="left">manufacturer_d_name</th>
<th align="left">manufacturer_d_country</th>
<th align="left">brand_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0002249697-2017-00023</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
<td align="left">Central</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX076</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
</tr>
<tr class="even">
<td align="left">0002249697-2017-00028</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
<td align="left">West</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX080</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
</tr>
<tr class="odd">
<td align="left">0002249697-2017-00025</td>
<td align="left">2017-01-03</td>
<td align="left">Bone Cement</td>
<td align="left">2</td>
<td align="left">Malfunction</td>
<td align="left">Orthopedic</td>
<td align="left">Central</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Manufacturer report</td>
<td align="left">MHX076</td>
<td align="left"></td>
<td align="left">STRYKER ORTHOPAEDICS-MAHWAH</td>
<td align="left">US</td>
<td align="left">SIMPLEX P - US TOBRA FD 10-PK</td>
</tr>
</tbody>
</table>
<div id="required-arguments" class="section level4">
<h4>Required Arguments</h4>
<dl>
<dt><code>data_frame</code></dt>
<dd>is the input device-event data frame. All remaining arguments refer to variables within this data frame.
</dd>
<dt><code>time</code></dt>
<dd>is the name of the variable containing the time of the event. The input format of the time will be flexibly converted into <code>Date</code> format.
</dd>
<dt><code>device_hierarchy</code></dt>
<dd>organizes all your device variables into a hierarchy. The hierarchical concept reflects how devices are often nested into progressively more general groups. Set the first variable as the lowest device level that you would like to trend at. <code>mds</code> remembers this hierarchy and allows trending at multiple levels as you specify.
</dd>
<dt><code>event_hierarchy</code></dt>
<dd>organizes all your event variables into a hierarchy. Like devices, event variables should be categorical in nature. <em>Free text descriptions should not be listed here</em>, but rather in the <code>descriptors</code> argument. The hierarchical concept reflects how events are often nested into progressively more general groups. Set the first variable as the lowest event level that you would like to trend at. <code>mds</code> remembers this hierarchy and allows trending at multiple levels as you specify. <em>If your data does not have an event variable</em>, you will need to create a dummy variable.
</dd>
</dl>
</div>
<div id="optional-arguments" class="section level4">
<h4>Optional Arguments</h4>
<dl>
<dt><code>key</code></dt>
<dd>is a unique identifier for each unique event in <code>data_frame</code>. If your data pipeline carries over a key variable, it is recommended to specify it here. The <code>key</code> allows downstream aggregated analysis to be able to “look up” individual constituent events.
</dd>
<dt><code>covariates</code></dt>
<dd>are a special group of variables that may be analyzed within device. For instance, declaring <code>covariates=&quot;Region&quot;</code> will allow analysis of regions within device. These variables should be categorical in nature.
</dd>
<dt><code>descriptors</code></dt>
<dd>are additional variables that should be retained for the purpose of describing individual events in downstream analysis.
</dd>
<dt><code>implant_days</code></dt>
<dd>contains the age in days of an implantable device at the time of the event.
</dd>
</dl>
</div>
</div>
<div id="ex" class="section level2">
<h2><code>exposure()</code> to Standardize Exposure Data</h2>
<p>Exposure data is meant to support device-event data. As such, the general expectation is that variable values match between exposure and device-event data. For example, 10 exposures for <code>ev3 Solitaire</code> in <code>France</code> will be matched <strong>exactly</strong> to <code>ev3 Solitaire</code> events in <code>France</code>, and not to events for <code>EV3 SOLITAIRE</code> in <code>FRANCE</code>.</p>
<p><strong>Basic Usage</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>ex &lt;-<span class="st"> </span><span class="kw">exposure</span>(sales, <span class="st">&quot;sales_month&quot;</span>, <span class="st">&quot;device_name&quot;</span>)</span></code></pre></div>
<pre><code>head(ex, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">key</th>
<th align="left">time</th>
<th align="right">count</th>
<th align="left">device_1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2017-01-01</td>
<td align="right">1</td>
<td align="left">Arthroscope</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">2017-02-01</td>
<td align="right">1</td>
<td align="left">Arthroscope</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">2017-03-01</td>
<td align="right">1</td>
<td align="left">Arthroscope</td>
</tr>
</tbody>
</table>
<p><strong>Advanced Usage</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>ex &lt;-<span class="st"> </span><span class="kw">exposure</span>(</span>
<span id="cb15-2"><a href="#cb15-2"></a>  sales,</span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="dt">time=</span><span class="st">&quot;sales_month&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="dt">device_hierarchy=</span><span class="st">&quot;device_name&quot;</span>,</span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="dt">match_levels=</span><span class="st">&quot;region&quot;</span>,</span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="dt">count=</span><span class="st">&quot;sales_volume&quot;</span>)</span></code></pre></div>
<pre><code>head(ex, 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">key</th>
<th align="left">time</th>
<th align="right">count</th>
<th align="left">device_1</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2017-01-01</td>
<td align="right">83</td>
<td align="left">Arthroscope</td>
<td align="left">Central</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">2017-02-01</td>
<td align="right">119</td>
<td align="left">Arthroscope</td>
<td align="left">Central</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">2017-03-01</td>
<td align="right">112</td>
<td align="left">Arthroscope</td>
<td align="left">Central</td>
</tr>
</tbody>
</table>
<div id="required-arguments-1" class="section level4">
<h4>Required Arguments</h4>
<p>Note: Although not required, <code>count</code> will commonly be used as well.</p>
<dl>
<dt><code>data_frame</code></dt>
<dd>is the input exposure data frame. All remaining arguments refer to variables within this data frame.
</dd>
<dt><code>time</code></dt>
<dd>is the name of the variable containing the time of the exposure. The input format of the time will be flexibly converted into <code>Date</code> format. If exposure will be used, it is <strong>critical</strong> to have sufficient time granularity. For example, if analysis will be done monthly, exposure data must be no less granular than monthly. <code>mds</code> does not make assumptions about filling in holes in time!
</dd>
<dt><code>device_hierarchy</code></dt>
<dd>contains all exposure device variables to match to your device-event data. As such, the values within these variables must match exactly to the values within each respective variable in the device-event data <code>device_hierarchy</code> parameter.
</dd>
<dt><code>event_hierarchy</code></dt>
<dd>contains all exposure event variables to match to your device-event data. As such, the values within these variables must match exactly to the values within each respective variable in the device-event data <code>event_hierarchy</code> parameter. Exposures at an event level is not common.
</dd>
</dl>
</div>
<div id="optional-arguments-1" class="section level4">
<h4>Optional Arguments</h4>
<dl>
<dt><code>count</code></dt>
<dd>is the most commonly specified optional parameter. It contains the number of exposures. If not specified, the number of rows will be used as a proxy for count.
</dd>
<dt><code>key</code></dt>
<dd>is a unique identifier for each unique exposure in <code>data_frame</code>. If your data pipeline carries over a key variable, it is recommended to specify it here. The <code>key</code> allows downstream aggregated analysis to be able to “look up” individual constituent exposure records.
</dd>
<dt><code>match_levels</code></dt>
<dd>are variables aside from time, device, and event that specify an exposure. A common “match level” is country, if your exposure data is specific by country.
</dd>
</dl>
</div>
</div>
<div id="da" class="section level2">
<h2><code>define_analyses()</code> to Enumerate Analysis Combinations</h2>
<p>After standardizing device-event data using <code>deviceevent()</code> and, optionally, exposure data using <code>exposure()</code>, the next step is to <strong>discover what types of analyses are possible</strong>. This is separated from actually doing the analysis (counting, calculations, statistics, etc.) because:</p>
<ul>
<li>You may not need to analyze everything</li>
<li>You may want to customize specific analyses, such as:
<ul>
<li>Custom date ranges</li>
<li>Covariate analysis for certain device-events</li>
<li>Analyze by month for one device, by quarter for another device</li>
<li>Use exposures for certain devices but not others</li>
</ul></li>
<li>A saved list of defined analyses quickly and easily answers:
<ul>
<li>Which devices and events did I analyze? When?</li>
<li>Did I also look at covariates?</li>
<li>Over what time period did I analyze?</li>
<li>Did I analyze monthly, quarterly, yearly, etc?</li>
<li>Did I use exposures?</li>
</ul></li>
</ul>
<p><strong>Basic Usage</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>da &lt;-<span class="st"> </span><span class="kw">define_analyses</span>(de, <span class="st">&quot;device_name&quot;</span>)</span></code></pre></div>
<p>Note that <code>define_analyses()</code> returns a list of individual analyses. Each individual analysis contains a set of instructions. You can view an analysis by submitting <code>da[[1]]</code>, <code>da[[2]]</code>, etc., but a less cumbersome overview is possible using <code>summary()</code> and <code>define_analyses_dataframe()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">summary</span>(da)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co">#&gt; $`Analyses Timestamp`</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#&gt; [1] &quot;2020-06-14 21:45:58 EDT&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">#&gt; </span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co">#&gt; $`Analyses Counts`</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">#&gt;         Total Analyses Analyses with Exposure          Device Levels </span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co">#&gt;                      7                      0                      6 </span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co">#&gt;           Event Levels             Covariates </span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co">#&gt;                      1                      1 </span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="co">#&gt; </span></span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="co">#&gt; $`Date Ranges`</span></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="co">#&gt;           Data      Start        End</span></span>
<span id="cb18-13"><a href="#cb18-13"></a><span class="co">#&gt; 1 Device-Event 2017-01-01 2017-12-01</span></span>
<span id="cb18-14"><a href="#cb18-14"></a><span class="co">#&gt; 2     Exposure       &lt;NA&gt;       &lt;NA&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="co">#&gt; 3         Both 2017-01-01 2017-12-01</span></span></code></pre></div>
<pre><code>head(define_analyses_dataframe(da), 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">device_level_source</th>
<th align="left">device_level</th>
<th align="left">device_1up_source</th>
<th align="left">device_1up</th>
<th align="left">event_level_source</th>
<th align="left">event_level</th>
<th align="left">covariate</th>
<th align="left">covariate_level</th>
<th align="left">invivo</th>
<th align="left">date_range_de_start</th>
<th align="left">date_range_de_end</th>
<th align="left">date_range_de_exp_start</th>
<th align="left">date_range_de_exp_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">Data</td>
<td align="left">All</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">device_name</td>
<td align="left">Bone Cement, Antibiotic</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">Data</td>
<td align="left">All</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">device_name</td>
<td align="left">Cement, Bone, Vertebroplasty</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">Data</td>
<td align="left">All</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
</tbody>
</table>
<p><strong>Advanced Usage</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>da &lt;-<span class="st"> </span><span class="kw">define_analyses</span>(</span>
<span id="cb20-2"><a href="#cb20-2"></a>  de,</span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="dt">device_level=</span><span class="st">&quot;device_name&quot;</span>,</span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="dt">exposure=</span>ex,</span>
<span id="cb20-5"><a href="#cb20-5"></a>  <span class="dt">covariates=</span><span class="st">&quot;region&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">summary</span>(da)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co">#&gt; $`Analyses Timestamp`</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co">#&gt; [1] &quot;2020-06-14 21:45:59 EDT&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co">#&gt; </span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co">#&gt; $`Analyses Counts`</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">#&gt;         Total Analyses Analyses with Exposure          Device Levels </span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co">#&gt;                     27                     27                      6 </span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="co">#&gt;           Event Levels             Covariates </span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">#&gt;                      1                      2 </span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">#&gt; </span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="co">#&gt; $`Date Ranges`</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="co">#&gt;           Data      Start        End</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="co">#&gt; 1 Device-Event 2017-01-01 2017-12-01</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co">#&gt; 2     Exposure 2017-01-01 2017-12-01</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co">#&gt; 3         Both 2017-01-01 2017-12-01</span></span></code></pre></div>
<pre><code>head(define_analyses_dataframe(da), 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">device_level_source</th>
<th align="left">device_level</th>
<th align="left">device_1up_source</th>
<th align="left">device_1up</th>
<th align="left">event_level_source</th>
<th align="left">event_level</th>
<th align="left">covariate</th>
<th align="left">covariate_level</th>
<th align="left">invivo</th>
<th align="left">date_range_de_start</th>
<th align="left">date_range_de_end</th>
<th align="left">exp_device_level</th>
<th align="left">exp_covariate_level</th>
<th align="left">date_range_exposure_start</th>
<th align="left">date_range_exposure_end</th>
<th align="left">date_range_de_exp_start</th>
<th align="left">date_range_de_exp_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">Central</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">Central</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">West</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">West</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">device_name</td>
<td align="left">Bone Cement</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">East</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">Bone Cement</td>
<td align="left">East</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
</tr>
</tbody>
</table>
<div id="required-arguments-2" class="section level4">
<h4>Required Arguments</h4>
<dl>
<dt><code>deviceevents</code></dt>
<dd>is a standardized device-event data frame. (<code>class()</code> should contain <code>&quot;mds_de&quot;</code>)
</dd>
<dt><code>device_level</code></dt>
<dd>is the source device variable to analyze by. Access these variable names by submitting <code>attributes(de)$device_hierarchy</code>.
</dd>
</dl>
</div>
<div id="optional-arguments-2" class="section level4">
<h4>Optional Arguments</h4>
<dl>
<dt><code>event_level</code></dt>
<dd>is the source event variable to analyze by. Access these variable names by submitting <code>attributes(de)$event_hierarchy</code>.
</dd>
<dt><code>exposure</code></dt>
<dd>is a standardized exposure data frame. (<code>class()</code> should contain <code>&quot;mde_e&quot;</code>)
</dd>
<dt><code>date_level</code> and <code>date_level_n</code></dt>
<dd>are arguments used together to specify the time interval to analyze by. Default of <code>&quot;months&quot;</code> and <code>1</code> analyzes by month. Other examples include <code>&quot;months&quot;</code> and <code>12</code> for yearly, or <code>&quot;days&quot;</code> and <code>7</code> for weekly.
</dd>
<dt><code>covariates</code></dt>
<dd>are variables to analyze within device. For example, <code>c(&quot;region&quot;)</code> analyzes by each level of <code>region</code> within device.
</dd>
<dt><code>times_to_calc</code></dt>
<dd>specifies how many time periods (counting back in time) to analyze for. Time period is defined using <code>date_level</code> and <code>date_level_n</code>.
</dd>
</dl>
</div>
<div id="what-about-analyses-across-all-events-all-devices-etc" class="section level3">
<h3>What About Analyses Across All Events, All Devices, etc?</h3>
<p><strong>It is always assumed that analyses at aggregated levels are desired.</strong> (such as analysis of all events for a given device, or analysis of all events across all devices)</p>
<p>Aggregated level analysis is easily recognized by the <code>&quot;All&quot;</code> and <code>&quot;Data&quot;</code> values in <code>device_level</code>, <code>event_level</code>, <code>covariate</code>, and <code>covariate_level</code>.</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">id</th>
<th align="left">device_level_source</th>
<th align="left">device_level</th>
<th align="left">device_1up_source</th>
<th align="left">device_1up</th>
<th align="left">event_level_source</th>
<th align="left">event_level</th>
<th align="left">covariate</th>
<th align="left">covariate_level</th>
<th align="left">invivo</th>
<th align="left">date_range_de_start</th>
<th align="left">date_range_de_end</th>
<th align="left">exp_device_level</th>
<th align="left">exp_covariate_level</th>
<th align="left">date_range_exposure_start</th>
<th align="left">date_range_exposure_end</th>
<th align="left">date_range_de_exp_start</th>
<th align="left">date_range_de_exp_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>11</td>
<td align="right">11</td>
<td align="left">device_name</td>
<td align="left">Cement, Bone, Vertebroplasty</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">East</td>
<td align="left">FALSE</td>
<td align="left">2017-01-01</td>
<td align="left">2017-08-01</td>
<td align="left">Cement, Bone, Vertebroplasty</td>
<td align="left">East</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-01-01</td>
<td align="left">2017-08-01</td>
</tr>
<tr class="even">
<td>12</td>
<td align="right">12</td>
<td align="left">device_name</td>
<td align="left">Cement, Bone, Vertebroplasty</td>
<td align="left">device_class</td>
<td align="left">2</td>
<td align="left">event_type</td>
<td align="left">All</td>
<td align="left">region</td>
<td align="left">Central</td>
<td align="left">FALSE</td>
<td align="left">2017-02-01</td>
<td align="left">2017-12-01</td>
<td align="left">Cement, Bone, Vertebroplasty</td>
<td align="left">Central</td>
<td align="left">2017-01-01</td>
<td align="left">2017-12-01</td>
<td align="left">2017-02-01</td>
<td align="left">2017-12-01</td>
</tr>
<tr class="odd">
<td>NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="how-to-customize-analyses" class="section level3">
<h3>How to Customize Analyses</h3>
<p>There are several options:</p>
<ul>
<li>Select certain analyses from the list (e.g. <code>da[[c(1:5, 24:27)]])</code>)</li>
<li>Rerun <code>define_analyses()</code> with different parameter settings</li>
<li>Edit values within an individual analysis (e.g. <code>da[[1]]$date_range_exposure[&#39;start&#39;] &lt;- as.Date(&quot;2016-10-01&quot;)</code>)</li>
</ul>
</div>
</div>
<div id="ts" class="section level2">
<h2><code>time_series()</code> to Generate Counts, Rates, and More</h2>
<p>Once an analysis has been defined using <code>define_analyses()</code>, the analyses instructions can be executed using <code>time_series()</code>, returning by defined time periods:</p>
<ul>
<li>Counts at the device, event, and <em>(optionally)</em> covariate level of interest.</li>
<li>Event IDs (the <code>key</code> parameter from <code>deviceevent()</code>) for lookup of individual event records.</li>
<li>Exposure counts</li>
<li>Exposure IDs (the <code>key</code> parameter from <code>exposure()</code>) for lookup of individual exposure records.</li>
<li>Disproportionality analysis (DPA) related counts:
<ul>
<li>Counts of the device &amp; non-event</li>
<li>Counts of the non-device &amp; event</li>
<li>Counts of the non-device &amp; non-event</li>
</ul></li>
</ul>
<p><strong>Basic Usage</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>ts &lt;-<span class="st"> </span><span class="kw">time_series</span>(da, de)</span></code></pre></div>
<p>Note that <code>time_series()</code> returns, in a list, one time series data frame for every analysis. You can select a time series by submitting <code>ts[[1]]</code>, <code>ts[[2]]</code>, etc.</p>
<pre><code>head(ts[[1]], 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">time</th>
<th align="right">nA</th>
<th align="left">ids</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">17167</td>
<td align="right">13</td>
<td align="left">0002249697-2017-00023</td>
</tr>
<tr class="even">
<td align="left">17198</td>
<td align="right">7</td>
<td align="left">0002249697-2017-00488</td>
</tr>
<tr class="odd">
<td align="left">17226</td>
<td align="right">5</td>
<td align="left">0002249697-2017-00755</td>
</tr>
</tbody>
</table>
<p><strong>Advanced Usage</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>ts &lt;-<span class="st"> </span><span class="kw">time_series</span>(</span>
<span id="cb25-2"><a href="#cb25-2"></a>  da,</span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="dt">deviceevents=</span>de,</span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="dt">exposure=</span>ex)</span></code></pre></div>
<pre><code>head(ts[[1]], 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">time</th>
<th align="right">nA</th>
<th align="left">ids</th>
<th align="right">exposure</th>
<th align="left">ids_exposure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">17167</td>
<td align="right">13</td>
<td align="left">0002249697-2017-00023</td>
<td align="right">8597</td>
<td align="left">37</td>
</tr>
<tr class="even">
<td align="left">17198</td>
<td align="right">7</td>
<td align="left">0002249697-2017-00488</td>
<td align="right">5115</td>
<td align="left">38</td>
</tr>
<tr class="odd">
<td align="left">17226</td>
<td align="right">5</td>
<td align="left">0002249697-2017-00755</td>
<td align="right">10191</td>
<td align="left">39</td>
</tr>
</tbody>
</table>
<div id="required-arguments-3" class="section level4">
<h4>Required Arguments</h4>
<dl>
<dt><code>analysis</code></dt>
<dd>is a single defined analysis (<code>class()</code> should contain <code>&quot;mds_da&quot;</code>) or a list of defined analysis.
</dd>
<dt><code>deviceevents</code></dt>
<dd>is a standardized device-event data frame (<code>class()</code> contains <code>&quot;mds_de&quot;</code>). It is typically the same data frame used to generate <code>analysis</code>, but can be another <code>&quot;mds_de&quot;</code> data frame, such as a cut of the data at a different time. Note if, say, an older dataset is being used, the <code>analysis</code> date ranges must correspond.
</dd>
</dl>
</div>
<div id="optional-arguments-3" class="section level4">
<h4>Optional Arguments</h4>
<dl>
<dt><code>exposure</code></dt>
<dd>is a standardized exposure data frame (<code>class()</code> contains <code>&quot;mds_e&quot;</code>). It is typically the same data frame used to generate <code>analysis</code>. Like <code>deviceevents</code>, another data frame may be used, but the <code>analysis</code> instructions must correspond.
</dd>
<dt><code>use_hierarchy</code></dt>
<dd>is a logical value for whether device and event hierarchies should be used for the calculation of disproportionality analysis (DPA) counts. Submit <code>?time_series.mds_da</code> for more details.
</dd>
</dl>
</div>
<div id="how-to-modify-counts-exposures" class="section level3">
<h3>How to Modify Counts &amp; Exposures</h3>
<p>It is not uncommon to adjust event and exposure counts, such as with applications of rolling or moving averages. These adjustments should be applied <strong>after</strong> generating time series data frames from <code>time_series()</code>.</p>
</div>
</div>
<div id="po" class="section level2">
<h2><code>plot()</code>ing a Time Series</h2>
<p>Plotting an individual time series generated by <code>time_series()</code> is simple. Simply call <code>plot()</code> on the time series object:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">plot</span>(ts[[<span class="dv">1</span>]])</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAyVBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZmYAZpAAZrY6AAA6ADo6AGY6OgA6Ojo6OmY6OpA6ZpA6ZrY6kLY6kNtmAABmADpmAGZmOgBmOjpmZgBmkJBmkLZmkNtmtrZmtttmtv+QOgCQOjqQZgCQZjqQkDqQkLaQtpCQttuQ27aQ29uQ2/+2ZgC2Zjq2ZpC2kDq2kGa225C227a229u22/+2/7a2/9u2///bkDrbkGbbtmbbtpDb27bb////tmb/25D/27b//7b//9v////lPf7OAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKgElEQVR4nO2dCXvbSAGGJ2kCNhu6hw2FZakNBQpROZeN2G7kRP7/P4o5pZFk6dM9sv29z1M3ceZ8NZdkeSSOpBERugBLh4IAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgK0EJT+/Qm80YlI3NZET/fi/nlAyoBYGG6++r5DLCzo5V2pQpU3uhFckKgtwCmwoEqF6mvYioHR+5MLEpv2sUxpEyF28gh+ku3v62ed1s3f5C93j6o+JeX6jZsHsTq6iLLK//6NDK1bbp5IhfTTWtx9NIKyYFFeAteCfnwQ4s372sS8wh2Pn9/J0ryVP75uxerzg7h5f/zf2v6tFDu21TisTdk/yzK/+d1zOcVSLG1GllKWTGahuHvyuutjjaDbP5n3dPWiPLSfSMXPPm/hebAkL4EVFGVH+XRiXuFUbPujDSvEgytwObYT9HmtW5BNRuXop1iKlQplU7650ZX9Xund6BiyPcTCvn2ii8lwO3PYdI1kzB+F+TlLpIyszOpZHR/t1AWTVlwJjCAZ7Jvnl20xVEmQK5yM8fNnE0JVbKMKId7nBS/EzruYkiL/IP8zIUvV9WO96uLG9hBsnOdYH1bTFk8LMvUyhz9yjeD2yU+kTOSOazFYnJXACDLB4q/+c6xJzC+c5Kd/PqhDIwObXnCfGyvGzgTdvM9KY/7zUizHOoi16/vy71lDi11rqxVkkohsn9AhVCQ/EX0AtvaAHa1SE9oPdshKoF/TfCorJ5YJyguXfjAhVvZ386oFVWIXBmmXTVyqbjnWQchimwaViPxPLQSpelnd3jjrJ1ISZFIzof1gaVYCJ2hlMyonVhUkA4u7P/+0PSWoEtu1ihfbhvNZxkuxUgERqwFX/WZGlepBqhGkKmKClVrQzg9bbEH6B9uC8mBZCU60oEJi1cIZsa8nBVViZ91GJdDQggqxUqHblArrnLYUpMI8uCr7Y9DqWENxDMqDZSVIvTEoefvxWJNY8XjvjtmQUxRUiZ21oL2Znf0xKEuxEkvoWXVnKiBHr5etGdxzQXGphbs3dL02JqI/i2WJlDGzmAr8VAzmSpC6Wexr1Y70AutUYsXjff8sK3yqBVVie2OQGXK9WcxvD8VYQhXImLUrABXWj6F6ZaEN2TdUHcz7bh3kLT5KTg1euEIwV4K0sA5a1SVWGoNs4KqgcuxckH6rsA7Kq1uOJbxG9fJBNgp9JleYKD65RbLFvZEIG1E20x8+2JheIhXSf6zlCtm0bT+YK0Hqr6S/q02sPIvdfYyzXusLKsfOBL01b+mV9HflFMuxBlzusGvggGdXc9Bf0Ms754WC8tVBcYFjl+PTC6rmPxsDBN18Y/9KQdcMBQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCDCyIHE2hBI0bnITYN1QUA3C+9c6wsj5LxnhXinoNBQEoCAExyAEZ7F2UBCAggAUBKAgwMyCup8DhoYtCEBBAAoCUBCAggBBBZ3DZBZSUKeT5VAEFJRdclk0EwlSXxzWX+SNa75jeOWCYr1JjPruNAWdIt1v9KvasaBe0BWPQa9b+z35++cmQdc7i5kWJIlWjYLOgYnGIKtF7+AyPLmQTDaLmU6W7ilo4nxDwwtmALYgAAUBJloH5V2Jg/Qp0rrJq19yIeku6PVXZt+ZpMlBuq/d465jvqHpL6hujWxITu5s2CPf0HQVFOWjS4e9lgfkG5r+LWimfEPDaR7QQ1C6b5zAR843ND0ERWPs1HbBgl63g0bnrvmGpo+g5gl85HxD010QXAOOm29oeoxBaA04br6h6dPFmk9DR843NLxgBuBCEcAuBujdghqvdoyYb2j6d7Fo0Gx/BYKGNaErENR8wWy0fEPTW5C5u2X6fEPTfxYb9hC9CxY0c76hoSBAH0H6YT0DHzpwyYIS+2i2Qef0FyzI3T4WDxqlL1iQu6LYuFCMhFjpi/t1zeyCBbVpQbF+Ptqq4QL2BQtqMQZph4l5OFeNxksWhGcx3QtNFyx1RF4w01x7C8JkY1B2x/Sg5ELSWZD51Oewbv708Hpnsdete1osT1ZPBoycl4GfQF+qIG9MGX8l3X5u67I53cAJs6Mg74P50S+5itbFaR+yS9D6BDoE9DrW2JdcRevytA/ZJWhjCu0D5p9lRCN3sQsRdFjvSj+Mle+FCLJnYvJUbNhtVJc6Bh3dLYpD7xG61FlsNC51HTR/vqGhIAAFASgIMLMgXlEMlNx0UBCAggAUBFisoNI4Psmw3iaPpQoqnWQOPufsncdCBZUuUwy/atE7DwoCeVAQyGOhgjgGcRabN7npoCDApIIaPvkYU1Cxa4zcGScRNO/+QcXBdezhfJoWZD8bmqUFFafn0RcEE3Uxc3dMVdAEF8zOU9DxGN08sgU1EovNPIP0OY5BmsP6DWexRtJ9/b3UXAfNm1zrbDs3r+sS1GOAuipBfaY4CmoVZ8yAQZLrkikFNefKMagxW85iYxNM0NkQSBBOtDHDSSIOqyMFASgIQEEACgJQEICCABQEoCDA2ZwbhIKCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBxhTU4+k36d5uFpJ03sha33M7xhOtmgkvyIiJugoyT9qJBu5ejAku6Gf60YGvv/5tR0Fmx6NxHtnUxPiC1PMkd6oH/H5bv52gFyVSfSy5/6MSZOPqyseNVS+YiYV+duXhF39ZD3yIZZXRBanKxbLhv27lS4x6gIySaDMbtfOVi6v2UUv3zXKTfCufWN+avFF7re7GeciVx9iC9MM21X3Cels0uJ+VjHL44knFkoK8uDvZHIBbtfWsHqPNBmxSqtkmc9g2fhWmGIMS1U/0xnrwsXcyimoqshXZvdMS18fa1FMO8aq96WYqxZrDkYw7bo8uSI4Ht/9adxCkBhs5DilBLq5qDlG7sSS6fUrs/Ro70+gWKijWw8bKdKpDJ0GHL374w6MSlMWVXe6v4Lm4rvNKHZmRRQtSxVL7eep9KpMuXUz++1YOQ1JQFle+9UvQw7LufPuUZWLGoGH7HFYYS5CZRXa28ci5tr0gswOzbUE6bpvd+MzSW39BS8+Vcsl4WKsRaamzWGKWMGocuXmUpe0gSNfJjkE67hHPYfZUw3Sn2Jx0HNbfrvHSqyMLPVk9fNmjnwzcJPM0CxUU91kPX4+gw7rXQHs9gpYEBQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEWJygbEfd2/+iD/ZnYXGCFC1uXZgNCgIsWJC+lXOtbibeHNbZvTVj3+aLWLwgdTOxuvlH3ePn7vedk8UL2hzdyy6733fOsixekLuvU75k9/vOWZazEuTu952zLGclaPKv9pzgnATBW0Kn4JwEZff7zlmWsxLk7vedk0UKWhIUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBDg/3GblqfhIrOpAAAAAElFTkSuQmCC" /><!-- --></p>
<p>There are a few custom parameters, including:</p>
<dl>
<dt><code>mode</code></dt>
<dd>with common values of <code>&quot;nA&quot;</code> (representing the device-event of interest), <code>&quot;exposure&quot;</code>, and <code>&quot;rate&quot;</code> (simply <code>&quot;nA&quot;/&quot;exposure&quot;</code>). Less common are <code>&quot;nB&quot;</code>, <code>&quot;nC&quot;</code>, and <code>&quot;nD&quot;</code> representing the cell counts of the disproportionality analysis (DPA) contingency table.
</dd>
<dt><code>xlab</code>, <code>ylab</code>, <code>main</code></dt>
<dd>representing default <code>plot()</code> behavior. By default, axes and title labels are inferred directly from the time series.
</dd>
</dl>
<p>All other parameters are from <code>plot.default()</code>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
